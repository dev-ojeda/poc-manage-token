<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Prueba WebSocket Seguro</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <script src="https://cdn.socket.io/4.7.4/socket.io.min.js"></script>
</head>
<body class="container py-5">

    <h1 class="mb-4">ðŸ”’ Prueba Socket.IO con HTTPS</h1>
    <div class="mb-3">
        <input id="mensaje" type="text" class="form-control" placeholder="Escribe un mensaje...">
    </div>
    <button id="enviar" class="btn btn-primary">Enviar</button>

    <hr>
    <h4>ðŸ“œ Respuestas:</h4>
    <ul id="mensajes"></ul>

    <script>
        // Conectar al servidor con WSS
        const socket = io("wss://localhost:5000", {
            transports: ["websocket"],
            secure: true
        });

        socket.on("connect", () => {
            console.log("âœ… Conectado al servidor");
        });

        document.getElementById("enviar").onclick = () => {
            const msg = document.getElementById("mensaje").value;
            socket.emit("mensaje", msg);
            document.getElementById("mensaje").value = "";
        };

        socket.on("respuesta", (data) => {
            const li = document.createElement("li");
            li.textContent = data.msg;
            document.getElementById("mensajes").appendChild(li);
        });
    </script>
</body>
</html>
